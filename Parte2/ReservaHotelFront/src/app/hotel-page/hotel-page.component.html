<div class="page">
  <aside class="panel">
    <h2 class="panel-title">HotÃ©is</h2>

    <div class="search">
      <input
        [(ngModel)]="query"
        placeholder="Filtrar por nome, cidade, paÃ­s..."
        class="input"
        (keyup.enter)="applyFilter()"
      />
      <button class="btn btn-search" (click)="applyFilter()" aria-label="Buscar">
        ðŸ”Ž
      </button>
    </div>

    <div class="stats">Exibindo: {{ filteredHotels.length }} / {{ hotels.length }}</div>

    <ul class="list">
      <li
        *ngFor="let h of filteredHotels; trackBy: trackByUri"
        (click)="focusHotel(h)"
        [class.active]="currentHotel?.uri === h.uri"
      >
        <img
          class="thumb"
          [src]="h.thumbnail || 'assets/imgs/hotel.png'"
          alt="{{ h.name }}"
          (error)="onImgError($event)"
        />

        <div class="meta">
          <div class="item-title">{{ h.name }}</div>
          <div class="item-sub">
            <span *ngIf="h.city">{{ h.city }}</span>
            <span *ngIf="h.city && h.country"> â€¢ </span>
            <span *ngIf="h.country">{{ h.country }}</span>
          </div>
        </div>

        <button class="btn btn-open" (click)="openDbpedia(h); $event.stopPropagation()">DBpedia</button>
      </li>
    </ul>
  </aside>

  <section class="map-wrap">
    <div class="map-rounded">
      <google-map
        #gmap
        height="100%"
        width="100%"
        [center]="center"
        [zoom]="zoom"
        [options]="mapOptions"
      >
        <map-marker
          *ngFor="let h of filteredHotels; trackBy: trackByUri"
          #m="mapMarker"
          [position]="{ lat: h.lat, lng: h.lng }"
          [title]="h.name"
          (mapClick)="openInfo(m, h)"
        >
        </map-marker>

        <map-info-window #info>
          <div class="info">
            <div class="info-title">{{ currentHotel?.name }}</div>
            <div class="info-sub">
              <span *ngIf="currentHotel?.city">{{ currentHotel?.city }}</span>
              <span *ngIf="currentHotel?.city && currentHotel?.country"> â€¢ </span>
              <span *ngIf="currentHotel?.country">{{ currentHotel?.country }}</span>
            </div>
            <button class="btn btn-open" (click)="openDbpedia(currentHotel!)">Ver na DBpedia</button>
          </div>
        </map-info-window>
      </google-map>
    </div>
  </section>
</div>
